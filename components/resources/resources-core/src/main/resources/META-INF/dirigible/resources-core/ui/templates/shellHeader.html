<div class="dg-main-header">
    <fd-tool-header has-menu="true">
        <fd-tool-header-group has-menu="true">
            <fd-popover fd-tool-header-element ng-if="collapseMenu">
                <fd-popover-control>
                    <fd-button fd-tool-header-button compact="true" glyph="sap-icon--menu2"
                        aria-label="main menu button">
                    </fd-button>
                </fd-popover-control>
                <fd-popover-body no-arrow="true" can-scroll="false">
                    <fd-menu aria-label="header menu">
                        <fd-menu-sublist ng-repeat="menuItem in menus[perspectiveId].items track by $index"
                            title="{{ menuItem.label }}" can-scroll="isScrollable(menuItem.items)">
                            <submenu sublist="menuItem.items" menu-handler="menuClick"></submenu>
                        </fd-menu-sublist>
                        <fd-menu-sublist ng-if="menus[perspectiveId].include.window"
                            title="{{ systemMenus.window.label }}" can-scroll="isScrollable(systemMenus.window.items)">
                            <submenu sublist="systemMenus.window.items" menu-handler="menuClick"></submenu>
                        </fd-menu-sublist>
                        <fd-menu-sublist ng-if="menus[perspectiveId].include.help" title="{{ systemMenus.help.label }}"
                            can-scroll="isScrollable(systemMenus.help.items)">
                            <submenu sublist="systemMenus.help.items" menu-handler="menuClick"></submenu>
                        </fd-menu-sublist>
                    </fd-menu>
                </fd-popover-body>
            </fd-popover>
            <a fd-tool-header-element href="{{ ::branding.brandUrl }}" class="dg-header--brand-link"
                ng-if="!collapseMenu">
                <img ng-cloak fd-tool-header-logo ng-src="{{ ::branding.logo }}" alt="" />
            </a>
            <a fd-tool-header-element href="{{ ::branding.brandUrl }}" class="dg-header--brand-link">
                <h5 fd-title header-size="h5" fd-tool-header-title><b>{{ ::branding.brand }}</b></h5>
            </a>
            <fd-popover fd-tool-header-element ng-repeat="menuItem in menus[perspectiveId].items track by $index"
                ng-if="!collapseMenu">
                <fd-popover-control>
                    <fd-button fd-tool-header-button compact="true" dg-label="{{ menuItem.label }}"
                        dg-type="transparent" is-menu="true" aria-label="menu button {{ menuItem.label }}">
                    </fd-button>
                </fd-popover-control>
                <fd-popover-body no-arrow="true" can-scroll="isScrollable(menus[perspectiveId].items)">
                    <fd-menu aria-label="header menu">
                        <fd-menu-item ng-repeat-start="item in menuItem.items track by $index" ng-if="!item.items"
                            title="{{ item.label }}" ng-click="menuClick(item)" has-separator="item.divider">
                        </fd-menu-item>
                        <fd-menu-sublist ng-if="item.items" has-separator="item.divider" title="{{ item.label }}"
                            can-scroll="isScrollable(item.items)" ng-repeat-end>
                            <submenu sublist="item.items" menu-handler="menuClick"></submenu>
                        </fd-menu-sublist>
                    </fd-menu>
                </fd-popover-body>
            </fd-popover>
            <fd-popover fd-tool-header-element ng-show="menus[perspectiveId].include.window" ng-if="!collapseMenu">
                <fd-popover-control>
                    <fd-button fd-tool-header-button compact="true" dg-label="{{ systemMenus.window.label }}"
                        dg-type="transparent" is-menu="true" aria-label="menu button {{ systemMenus.window.label }}">
                    </fd-button>
                </fd-popover-control>
                <fd-popover-body no-arrow="true" can-scroll="isScrollable(systemMenus.window.items)">
                    <fd-menu aria-label="header menu {{ systemMenus.window.label }}">
                        <fd-menu-item ng-repeat-start="item in systemMenus.window.items track by $index"
                            ng-if="!item.items" title="{{ item.label }}" ng-click="menuClick(item)"
                            has-separator="item.divider">
                        </fd-menu-item>
                        <fd-menu-sublist ng-if="item.items" has-separator="item.divider" title="{{ item.label }}"
                            can-scroll="isScrollable(item.items)" ng-repeat-end>
                            <submenu sublist="item.items" menu-handler="menuClick"></submenu>
                        </fd-menu-sublist>
                    </fd-menu>
                </fd-popover-body>
            </fd-popover>
            <fd-popover fd-tool-header-element ng-show="menus[perspectiveId].include.help" ng-if="!collapseMenu">
                <fd-popover-control>
                    <fd-button fd-tool-header-button compact="true" dg-label="{{ ::systemMenus.help.label }}"
                        dg-type="transparent" is-menu="true" aria-label="menu button {{ ::systemMenus.help.label }}">
                    </fd-button>
                </fd-popover-control>
                <fd-popover-body no-arrow="true" can-scroll="::isScrollable(systemMenus.help.items)">
                    <fd-menu aria-label="header menu {{ ::systemMenus.help.label }}">
                        <fd-menu-item ng-repeat-start="item in systemMenus.help.items track by $index"
                            ng-if="!item.items" title="{{ ::item.label }}" ng-click="::menuClick(item)"
                            has-separator="::item.divider">
                        </fd-menu-item>
                        <fd-menu-sublist ng-if="item.items" has-separator="::item.divider" title="{{ ::item.label }}"
                            can-scroll="::isScrollable(item.items)" ng-repeat-end>
                            <submenu sublist="::item.items" menu-handler="::menuClick"></submenu>
                        </fd-menu-sublist>
                    </fd-menu>
                </fd-popover-body>
            </fd-popover>
        </fd-tool-header-group>

        <div style="flex:2" id="spacer"></div>

        <fd-tool-header-group position="right">
            <fd-popover close-innerclick="true" fd-tool-header-element class="dg-backdrop-element">
                <fd-popover-control>
                    <fd-button compact="true" dg-label="Theme" title="Theme" is-menu="true" fd-tool-header-button>
                    </fd-button>
                </fd-popover-control>
                <fd-popover-body no-arrow="true" dg-align="bottom-right">
                    <fd-menu aria-label="theme menu">
                        <fd-menu-item title="{{ ::theme.name }}" ng-repeat="theme in themes track by $index"
                            has-separator="$last ? true : false"
                            icon-before="{{ theme.id === currentTheme.id ? 'sap-icon--accept' : 'none' }}"
                            ng-click="setTheme(theme.id, theme.name)"></fd-menu-item>
                        <fd-menu-item title="Reset" icon-before="sap-icon--reset" ng-click="resetAll()">
                        </fd-menu-item>
                    </fd-menu>
                </fd-popover-body>
            </fd-popover>
            <fd-popover close-innerclick="true">
                <fd-popover-control>
                    <fd-button compact="true" dg-label="{{ ::user.name }}" dg-type="transparent" is-menu="true"
                        fd-tool-header-button>
                    </fd-button>
                </fd-popover-control>
                <fd-popover-body no-arrow="true" dg-align="bottom-right" can-scroll="false">
                    <fd-menu aria-label="user menu">
                        <fd-menu-item title="Logout" ng-click="logout()"></fd-menu-item>
                    </fd-menu>
                </fd-popover-body>
            </fd-popover>
        </fd-tool-header-group>
    </fd-tool-header>
</div>
